// Generated by CoffeeScript 1.8.0
(function() {
  var WheelOfFortune;

  document.addEventListener("DOMContentLoaded", function() {
    var animation;
    return animation = new WheelOfFortune(details);
  });

  WheelOfFortune = (function() {
    WheelOfFortune.prototype.last = 0;

    function WheelOfFortune(details) {
      this.slideIndex = 0;
      this.details = details;
      this.firstSlide = document.getElementsByClassName("slide1");
      this.secondSlide = document.getElementsByClassName("slide2");
      this.setSlides();
      this.animate = setInterval(this.rotation, 20, this);
    }

    WheelOfFortune.prototype.rotation = function(WheelOfFortune) {
      var waitTime;
      waitTime = 100;
      if (WheelOfFortune.last > waitTime) {
        WheelOfFortune.firstSlide[0].style.MozTransform = "rotate(-" + ((WheelOfFortune.last - waitTime) / 10) + "deg)";
        WheelOfFortune.secondSlide[0].style.MozTransform = "rotate(" + (30 - ((WheelOfFortune.last - waitTime) / 10)) + "deg)";
      }
      WheelOfFortune.last += 1;
      if (WheelOfFortune.last > 300 + waitTime) {
        WheelOfFortune.setSlides();
        WheelOfFortune.resetSlidesPosition();
        return WheelOfFortune.last = 0;
      }
    };

    WheelOfFortune.prototype.setSlides = function() {
      if (this.slideIndex < (this.details.length - 2)) {
        document.querySelector('.slide1>h2').innerHTML = this.details[this.slideIndex].titre;
        if (this.details[this.slideIndex].texte != null) {
          document.querySelector('.slide1>p').innerHTML = this.details[this.slideIndex].texte;
        } else {
          document.querySelector('.slide1>p').innerHTML = "";
        }
        document.querySelector('.slide2>h2').innerHTML = this.details[this.slideIndex + 1].titre;
        if (this.details[this.slideIndex + 1].texte != null) {
          document.querySelector('.slide2>p').innerHTML = this.details[this.slideIndex + 1].texte;
        } else {
          document.querySelector('.slide2>p').innerHTML = "";
        }
        return this.slideIndex += 1;
      } else {
        return clearInterval(this.animate);
      }
    };

    WheelOfFortune.prototype.resetSlidesPosition = function() {
      this.firstSlide[0].style.MozTransform = "rotate(0deg)";
      return this.secondSlide[0].style.MozTransform = "rotate(30deg)";
    };

    return WheelOfFortune;

  })();

}).call(this);
